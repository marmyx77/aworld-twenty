# =============================================================================
# Twenty CRM — Environment Variables Reference for Railway
# =============================================================================
# Copy this file and fill in the values for each Railway service.
# Sections: COMMON, APP (twenty-app-*), WORKER (twenty-worker-*)
# =============================================================================

# ─── COMMON (shared by app + worker) ────────────────────────────────────────

# "production" for prod, "development" for dev
NODE_ENV=production

# PostgreSQL connection string — provided by Railway Postgres plugin
# Format: postgres://user:password@host:port/dbname
PG_DATABASE_URL=postgres://postgres:PASSWORD@HOST:5432/railway

# Redis connection string — provided by Railway Redis plugin
# Format: redis://default:password@host:port
REDIS_URL=redis://default:PASSWORD@HOST:6379

# Secret for signing JWTs — generate with: openssl rand -base64 32
APP_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL

# Public URL of the Twenty server (used for CORS, OAuth callbacks, etc.)
# Example dev:  https://twenty-app-dev.up.railway.app
# Example prod: https://crm.yourdomain.com
SERVER_URL=https://YOUR_RAILWAY_APP_URL

# Frontend URL (same as SERVER_URL when using the unified Docker image)
FRONTEND_URL=https://YOUR_RAILWAY_APP_URL

# ─── STORAGE ────────────────────────────────────────────────────────────────

# "local" for Railway volume, "s3" for S3-compatible storage
STORAGE_TYPE=local

# Only needed if STORAGE_TYPE=s3
# STORAGE_S3_REGION=eu-west-1
# STORAGE_S3_NAME=your-bucket-name
# STORAGE_S3_ENDPOINT=https://s3.amazonaws.com

# ─── APP SERVICE (twenty-app-*) ─────────────────────────────────────────────

# Port the server listens on — Railway sets this automatically
# NODE_PORT=3000

# Disable these on the app service if you run a separate worker
# DISABLE_DB_MIGRATIONS=false       (let the app run migrations on startup)
# DISABLE_CRON_JOBS_REGISTRATION=false

# ─── WORKER SERVICE (twenty-worker-*) ───────────────────────────────────────

# The worker needs the same PG_DATABASE_URL, REDIS_URL, APP_SECRET, SERVER_URL
# Plus these overrides:
# DISABLE_DB_MIGRATIONS=true        (migrations run on app, not worker)
# DISABLE_CRON_JOBS_REGISTRATION=true

# ─── OPTIONAL: Authentication Providers ─────────────────────────────────────

# AUTH_GOOGLE_ENABLED=false
# AUTH_GOOGLE_CLIENT_ID=
# AUTH_GOOGLE_CLIENT_SECRET=
# AUTH_GOOGLE_CALLBACK_URL=${SERVER_URL}/auth/google/redirect
# AUTH_GOOGLE_APIS_CALLBACK_URL=${SERVER_URL}/auth/google-apis/get-access-token

# AUTH_MICROSOFT_ENABLED=false
# AUTH_MICROSOFT_CLIENT_ID=
# AUTH_MICROSOFT_CLIENT_SECRET=
# AUTH_MICROSOFT_CALLBACK_URL=${SERVER_URL}/auth/microsoft/redirect
# AUTH_MICROSOFT_APIS_CALLBACK_URL=${SERVER_URL}/auth/microsoft-apis/get-access-token

# ─── OPTIONAL: Email ────────────────────────────────────────────────────────

# EMAIL_FROM_ADDRESS=contact@yourdomain.com
# EMAIL_FROM_NAME="Your Company"
# EMAIL_SYSTEM_ADDRESS=system@yourdomain.com
# EMAIL_DRIVER=smtp
# EMAIL_SMTP_HOST=smtp.gmail.com
# EMAIL_SMTP_PORT=465
# EMAIL_SMTP_USER=
# EMAIL_SMTP_PASSWORD=

# ─── OPTIONAL: Observability ────────────────────────────────────────────────

# SENTRY_DSN=
# SENTRY_ENVIRONMENT=production
# LOG_LEVELS=error,warn
# LOGGER_DRIVER=console
